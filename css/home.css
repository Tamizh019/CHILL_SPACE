:root {
    --primary: #6366f1;
    --primary-dark: #4f46e5;
    --secondary: #f59e0b;
    --dark: #0f172a;
    --darker: #020617;
    --light: #f8fafc;
    --gray: #94a3b8;  
    --success: #10b981;
    --danger: #ef4444;
    --card-bg: rgba(15, 23, 42, 0.7);
    --card-border: rgba(148, 163, 184, 0.1);
    --card: #1e293b;
    --text: #f8fafc;
    --card-hover: #334155;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
  }

  body {
    background: var(--darker);
    color: var(--light);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
  }

  /* ===== HEADER STYLES ===== */
  header {
    background: linear-gradient(135deg, var(--dark) 0%, rgba(15, 23, 42, 0.95) 100%);
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.3),
      0 1px 0 rgba(99, 102, 241, 0.1) inset;
    min-height: 70px;
    flex-shrink: 0;
    backdrop-filter: blur(20px);
    position: relative;
  }

  header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--primary), transparent);
    opacity: 0.6;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    z-index: 2;
  }

  .animated-text-container {
    display: flex;
    align-items: center;
    gap: 0.1rem;
    min-height: 2rem;
    position: relative;
  }

  .cyber-animated-text {
    font-family: 'Poppins', sans-serif;
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    background: linear-gradient(135deg, #00d4ff, #6366f1);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    filter: drop-shadow(0 0 8px rgba(0, 212, 255, 0.3));
    transition: all 0.3s ease;
    min-width: 150px;
    display: inline-block;
  }

  .animated-cursor {
    font-family: 'Poppins', sans-serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #00d4ff;
    animation: cursorBlink 1s infinite;
    text-shadow: 
      0 0 5px #00d4ff,
      0 0 10px #00d4ff,
      0 0 15px rgba(0, 212, 255, 0.5);
    transition: opacity 0.3s ease;
  }

  @keyframes cursorBlink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  .header-actions {
    display: flex;
    align-items: center;
    gap: 2rem;
    margin-left: auto;
    z-index: 2;
  }

  .user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.5rem 1.2rem;
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
  }

  .user-info::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(99, 102, 241, 0.1), transparent);
    transform: translateX(-100%) translateY(-100%) rotate(45deg);
    transition: transform 0.6s ease;
  }

  .user-info:hover::before {
    transform: translateX(100%) translateY(100%) rotate(45deg);
  }

  .user-info:hover {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.5);
    box-shadow: 
      0 8px 25px rgba(99, 102, 241, 0.3),
      0 0 20px rgba(99, 102, 241, 0.2);
    transform: translateY(-2px);
  }

  #username {
    color: var(--light);
    font-weight: 600;
    font-size: 1rem;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    letter-spacing: 0.5px;
    position: relative;
    z-index: 1;
    background: linear-gradient(135deg, var(--light), rgba(255, 255, 255, 0.8));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: all 0.3s ease;
  }

  .user-info:hover #username {
    text-shadow: 
      0 0 10px rgba(99, 102, 241, 0.8),
      0 1px 3px rgba(0, 0, 0, 0.3);
    transform: translateX(2px);
  }

  .user-avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
  }

  .user-avatar::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--primary));
    border-radius: 50%;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .user-avatar:hover::before {
    opacity: 1;
    animation: avatarGlow 2s ease-in-out infinite;
  }

  @keyframes avatarGlow {
    0%, 100% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.05); opacity: 1; }
  }

  .user-avatar:hover {
    transform: scale(1.1);
    box-shadow: 
      0 6px 20px rgba(99, 102, 241, 0.6),
      0 0 30px rgba(99, 102, 241, 0.3);
  }

  .user-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
  }

  #logoutBtn {
    background: linear-gradient(135deg, var(--danger), #dc2626);
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 25px;
    color: white;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 
      0 4px 15px rgba(239, 68, 68, 0.3),
      0 2px 8px rgba(0, 0, 0, 0.2);
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  #logoutBtn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
  }

  #logoutBtn:hover::before {
    left: 100%;
  }

  #logoutBtn:hover {
    background: linear-gradient(135deg, #dc2626, #991b1b);
    transform: translateY(-3px);
    box-shadow: 
      0 8px 25px rgba(239, 68, 68, 0.4),
      0 4px 15px rgba(0, 0, 0, 0.3),
      0 0 20px rgba(239, 68, 68, 0.2);
  }

  #logoutBtn:active {
    transform: translateY(-1px);
    box-shadow: 
      0 4px 15px rgba(239, 68, 68, 0.4),
      0 2px 8px rgba(0, 0, 0, 0.2);
  }

  #logoutBtn i {
    font-size: 1rem;
    transition: transform 0.3s ease;
  }

  #logoutBtn:hover i {
    transform: translateX(2px);
  }

  .desktop-only {
    display: inline;
  }

  /* ===== MAIN CONTENT ===== */
  main {
    flex: 1;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    max-width: 1600px;
    margin: 0 auto;
    width: 100%;
    overflow-x: hidden;
  }

  .main-content {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    width: 100%;
    max-width: 1600px;
    margin: 0 auto;
    overflow-x: hidden;
  }

  .chat-container {
    width: 100%;
    height: 800px; 
    min-height: 600px;
    display: flex;
    flex-direction: column;
  }

  .sidebar-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
    width: 100%;
  }

  .card {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 12px;
    border: 1px solid var(--card-border);
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .card h2 {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--light);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* ===== CHAT STYLES ===== */
  .chat-messages {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    background: rgba(2, 6, 23, 0.5);
    border-radius: 8px;
    margin-bottom: 0;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    scrollbar-width: thin;
    scrollbar-color: var(--gray) transparent;
    width: 100%;
    max-width: 100%;
  }

  .chat-messages::-webkit-scrollbar {
    width: 8px;
  }

  .chat-messages::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 4px;
  }

  .chat-messages::-webkit-scrollbar-thumb {
    background: var(--gray);
    border-radius: 4px;
    transition: background 0.3s ease;
  }

  .chat-messages::-webkit-scrollbar-thumb:hover {
    background: var(--light);
  }

  .message {
    max-width: 80%;
    padding: 0.85rem 1.1rem;
    border-radius: 16px;
    position: relative;
    animation: messageSlideIn 0.3s ease-out;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    font-size: 0.95rem;
    line-height: 1.4;
  }

  @keyframes messageSlideIn {
    from {
      opacity: 0;
      transform: translateY(10px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .message-sent {
    align-self: flex-end;
    background: var(--primary);
    border-bottom-right-radius: 4px;
  }

  .message-received {
    align-self: flex-start;
    background: var(--dark);
    border-bottom-left-radius: 4px;
  }

  .message-sender {
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 0.35rem;
    color: var(--secondary);
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }

  .chat-avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 0.35rem;
    background: var(--primary, #6366f1);
    box-shadow: 0 3px 8px rgba(99,102,241,0.13);
  }

  .user-role {
    font-size: 0.75rem;
    padding: 0.15rem 0.5rem;
    border-radius: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .role-admin {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
  }

  .role-moderator {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
    border: 1px solid rgba(16, 185, 129, 0.3);
  }

  .role-vip {
    background: rgba(245, 158, 11, 0.2);
    color: #f59e0b;
    border: 1px solid rgba(245, 158, 11, 0.3);
  }

  .role-user {
    background: rgba(251, 146, 60, 0.2);
    color: #fb923c;
    border: 1px solid rgba(251, 146, 60, 0.3);
  }

  .message-time {
    font-size: 0.72rem;
    color: var(--gray);
    text-align: right;
    margin-top: 0.35rem;
  }

  .message-content {
    position: relative;
  }

  .message-actions {
    position: absolute !important;
    top: -8px !important;
    right: -8px !important;
    display: flex !important;
    gap: 0.6rem !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
    transition: all 0.2s ease !important;
    z-index: 10 !important;
    background: rgba(0, 0, 0, 0.85) !important;
    padding: 0.3rem 0.5rem !important;
    border-radius: 8px !important;
    backdrop-filter: blur(10px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
  }

  .message:hover .message-actions {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: auto !important;
  }

  .pin-btn {
    background: var(--secondary) !important;
    border: none !important;
    color: white !important;
    width: 28px !important;
    height: 28px !important;
    border-radius: 50% !important;
    cursor: pointer !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 0.75rem !important;
    transition: all 0.2s ease !important;
    flex-shrink: 0 !important;
  }

  .pin-btn:hover {
    background: #e67e22 !important;
    transform: scale(1.1) !important;
  }

  .pin-btn.pinned {
    background: var(--primary) !important;
  }

  .message-delete {
    background: var(--danger) !important;
    border: none !important;
    color: white !important;
    width: 28px !important;
    height: 28px !important;
    border-radius: 50% !important;
    cursor: pointer !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 0.75rem !important;
    transition: all 0.2s ease !important;
    flex-shrink: 0 !important;
  }

  .message-delete:hover {
    background: #dc2626 !important;
    transform: scale(1.1) !important;
  }

  /* ===== INPUT AREA ===== */
  .chat-input {
    display: flex;
    gap: 0.5rem;
    position: relative;
    width: 100%;
    max-width: 100%;
  }

  .chat-input input {
    flex: 1;
    background: var(--dark);
    border: 1px solid var(--card-border);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    color: var(--light);
    min-height: 44px;
    font-size: 16px;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }

  .chat-input input:focus {
    outline: none;
    border-color: var(--primary);
  }

  .chat-input textarea {
    flex: 1;
    background: var(--dark);
    border: 1px solid var(--card-border);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    color: var(--light);
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
    line-height: 1.4;
    resize: vertical;
    min-height: 60px;
    max-height: 200px;
    font-size: 16px;
  }

  .chat-input textarea:focus {
    outline: none;
    border-color: var(--primary);
  }

  .chat-controls {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  /* ===== BUTTONS ===== */
  .btn {
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    min-height: 44px;
    touch-action: manipulation;
  }

  .btn-primary {
    background: var(--primary);
  }

  .btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
  }

  .btn-secondary {
    background: var(--secondary);
  }

  .btn-secondary:hover {
    background: #e67e22;
    transform: translateY(-1px);
  }

  .btn-danger {
    background: var(--danger);
  }

  .btn-danger:hover {
    background: #dc2626;
    transform: translateY(-1px);
  }

  .btn-outline {
    background: transparent;
    border: 1px solid var(--gray);
    color: var(--gray);
  }

  .btn-outline:hover {
    border-color: var(--light);
    color: var(--light);
  }

  .btn-sm {
    padding: 0.25rem 0.75rem;
    font-size: 0.875rem;
  }

  .code-toggle, .emoji-toggle, .fullscreen-toggle {
    background: var(--secondary);
    border: none;
    color: white;
    padding: 0.5rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.875rem;
  }

  .code-toggle:hover, .emoji-toggle:hover, .fullscreen-toggle:hover {
    background: #e67e22;
    transform: translateY(-1px);
  }

  .code-toggle.active, .emoji-toggle.active, .fullscreen-toggle.active {
    background: var(--primary);
  }

  /* ===== DATE DIVIDERS ===== */
  .date-divider {
    display: flex;
    align-items: center;
    margin: 1.5rem 0 1rem 0;
    position: relative;
  }

  .date-divider::before,
  .date-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--card-border), transparent);
  }

  .date-divider-text {
    background: var(--darker);
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--gray);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 1px solid var(--card-border);
    margin: 0 1rem;
    text-align: center;
    min-width: 100px;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  .date-divider-text.today {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(99, 102, 241, 0.1));
    border-color: rgba(99, 102, 241, 0.5);
    color: var(--primary);
    font-weight: 600;
    box-shadow: 0 2px 12px rgba(99, 102, 241, 0.3); 
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(15px);
    border: 2px solid rgba(99, 102, 241, 0.4);
  }

  .date-divider.today-divider {
    margin: 0.5rem 0;
    background: rgba(99, 102, 241, 0.05);
    padding: 0.5rem 0;
    border-radius: 8px;
  }

  .date-divider-text.yesterday {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
    border-color: rgba(245, 158, 11, 0.3);
    color: var(--secondary);
  }

  /* ===== PINNED MESSAGES ===== */
  .pinned-messages-section {
    background: rgba(99, 102, 241, 0.05);
    border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    transition: all 0.3s ease;
    flex-shrink: 0;
  }

  .pinned-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 1rem;
    background: rgba(99, 102, 241, 0.1);
    border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--primary);
  }

  .pinned-messages {
    max-height: 120px;
    overflow-y: auto;
    padding: 0.5rem;
    transition: max-height 0.3s ease;
  }

  .pinned-messages.collapsed {
    max-height: 0;
    padding: 0 0.5rem;
  }

  .pinned-message {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 6px;
    padding: 0.5rem 0.75rem;
    margin-bottom: 0.4rem;
    position: relative;
    animation: pinnedSlideIn 0.3s ease-out;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    min-height: 40px;
  }

  .pinned-message:last-child {
    margin-bottom: 0;
  }

  .pinned-user-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0;
    min-width: 120px;
  }

  .pinned-user-info img {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    object-fit: cover;
  }

  .pinned-username {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--primary);
    white-space: nowrap;
  }

  .pinned-role {
    font-size: 0.6rem;
    padding: 0.1rem 0.3rem;
    border-radius: 8px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .pinned-content {
    flex: 1;
    color: var(--light);
    font-size: 0.8rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }

  .pinned-actions {
    display: flex;
    gap: 0.25rem;
    flex-shrink: 0;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .pinned-message:hover .pinned-actions {
    opacity: 1;
  }

  .unpin-btn {
    background: var(--danger);
    border: none;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.65rem;
    transition: all 0.2s ease;
  }

  .unpin-btn:hover {
    background: #dc2626;
    transform: scale(1.1);
  }

  @keyframes pinnedSlideIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* ===== EMOJI PICKER ===== */
  .emoji-picker {
    position: fixed;
    bottom: 100px;
    left: 1rem;
    right: 1rem;
    background: var(--dark);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(15px);
    z-index: 10000;
    max-height: 400px;
    overflow: hidden;
    animation: emojiSlideDown 0.3s ease-out;
  }

  @keyframes emojiSlideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .emoji-picker-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem;
    border-bottom: 1px solid var(--card-border);
    background: var(--card-bg);
  }

  .emoji-search {
    flex: 1;
  }

  .emoji-search input {
    width: 100%;
    background: var(--darker);
    border: 1px solid var(--card-border);
    border-radius: 6px;
    padding: 0.5rem 0.75rem;
    color: var(--light);
    font-size: 0.875rem;
  }

  .emoji-search input:focus {
    outline: none;
    border-color: var(--primary);
  }

  .emoji-close {
    background: none;
    border: none;
    color: var(--gray);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 4px;
    transition: all 0.2s ease;
  }

  .emoji-close:hover {
    color: var(--light);
    background: rgba(148, 163, 184, 0.1);
  }

  .emoji-categories {
    display: flex;
    gap: 0.25rem;
    padding: 0.5rem;
    border-bottom: 1px solid var(--card-border);
    background: var(--card-bg);
    overflow-x: auto;
  }

  .emoji-category {
    background: none;
    border: none;
    color: var(--gray);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-size: 1.1rem;
    flex-shrink: 0;
  }

  .emoji-category:hover {
    background: rgba(148, 163, 184, 0.1);
    color: var(--light);
  }

  .emoji-category.active {
    background: var(--primary);
    color: white;
  }

  .emoji-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 0.25rem;
    padding: 0.75rem;
    max-height: 280px;
    overflow-y: auto;
  }

  .emoji-item {
    background: none;
    border: none;
    color: var(--light);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .emoji-item:hover {
    background: rgba(99, 102, 241, 0.2);
    transform: scale(1.1);
  }

  /* ===== TYPING INDICATOR ===== */
  .typing {
    display: flex;
    align-items: flex-end;
    gap: 8px;
    margin: 0;
    padding: 0.5rem 1rem;
    font-size: 0.85rem;
    line-height: 18px;
    background: rgba(2, 6, 23, 0.3);
    border-radius: 8px;
    margin-bottom: 0.5rem;
    animation: pulse 2s infinite;
  }

  .typing.hidden { 
    display: none; 
  }

  @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
  }

  .typing .avatar { 
    width: 28px; 
    height: 28px; 
    flex-shrink: 0; 
  }

  .typing .avatar img{
    width: 100%; 
    height: 100%;
    object-fit: cover; 
    border-radius: 50%;
  }

  .typing .bubble{
    background: var(--card-border);
    color: var(--light);
    border-radius: 16px 16px 16px 4px;
    padding: 6px 10px 6px 12px;
    position: relative;
    max-width: 240px;
  }

  .typing .bubble:before{
    content:"";
    position:absolute; 
    left:-4px; 
    bottom:0;
    border-width:6px 6px 0 0; 
    border-style:solid;
    border-color:var(--card-border) transparent transparent transparent;
  }

  .typing .dot{
    display:inline-block;
    width: 5px; 
    height: 5px;
    margin: 0 2px;
    background: var(--primary);
    border-radius: 50%;
    animation: bounce 1.1s infinite ease-in-out;
  }

  .typing .dot:nth-child(2){
    animation-delay: .15s;
  }

  .typing .dot:nth-child(3){
    animation-delay: .30s;
  }

  @keyframes bounce{
    0%, 80%, 100% { 
      transform: translateY(0);   
      opacity:.4;
    }
    40% { 
      transform: translateY(-6px); 
      opacity:1;
    }
  }

  /* ===== PROFILE POPOVER ===== */
  .profile-pop {
    position: absolute;
    top: 60px;
    right: 0;
    background: linear-gradient(135deg, var(--darker), rgba(2, 6, 23, 0.95));
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 16px;
    padding: 1.5rem;
    min-width: 220px;
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.4),
      0 10px 25px rgba(99, 102, 241, 0.2);
    z-index: 1000;
    display: none;
    opacity: 0;
    transform: translateY(-15px) scale(0.95);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(20px);
  }

  .profile-pop.open {
    display: block;
    opacity: 1;
    transform: translateY(0) scale(1);
  }

  .profile-pop::before {
    content: '';
    position: absolute;
    top: -8px;
    right: 20px;
    width: 16px;
    height: 16px;
    background: linear-gradient(135deg, var(--darker), rgba(2, 6, 23, 0.95));
    border-left: 1px solid rgba(99, 102, 241, 0.3);
    border-top: 1px solid rgba(99, 102, 241, 0.3);
    transform: rotate(45deg);
  }

  .pop-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin-bottom: 0.5rem;
  }

  .pop-info h4 {
    margin: 0 0 0.5rem 0;
    color: var(--primary);
  }

  .pop-info p {
    margin: 0.25rem 0;
    color: var(--gray);
    font-size: 0.9rem;
  }
  .mobile-avatar {
display: none !important; /* Hide by default (PC/tablet) */
}
.back-btn-mobile {
display: none;
}

/* ===== MOBILE HEADER OPTIMIZATION - DARK THEME ===== */
@media (max-width: 768px) {
/* BASE STYLES - DARK THEME */
body, .chat-container {
  background: var(--darker, #020617) !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
  color: var(--text, #f8fafc) !important;
  font-size: 0.95rem;
  line-height: 1.4;
}

/* ===== HEADER - DARK THEME ===== */
header {
  background: var(--dark, #0f172a) !important;
  color: var(--text, #f8fafc) !important;
  padding: 0.75rem 1rem !important;
  min-height: 60px !important;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 10001 !important;
  backdrop-filter: blur(15px) !important;
}

.logo {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

/* Hide typewriter animation and subtitle on mobile */
.animated-text-container {
  display: none !important;
}

#subtitleText {
  display: none !important;
}

/* Simple logo text for mobile */
.logo::after {
  content: "Chill Space" !important;
  font-size: 1.1rem !important;
  font-weight: 600 !important;
  color: var(--primary, #6366f1) !important;
  letter-spacing: 0.5px !important;
  margin: 0 !important;
  padding: 0 !important;
}

.header-actions {
  display: flex !important;
  align-items: center !important;
  gap: 0.8rem !important;
  margin-left: auto !important;
}

/* Hide username on mobile */
.user-info {
  display: none !important;
}

/* Mobile avatar */
.mobile-avatar {
  display: inline-block !important;
  margin-right: 0.5rem !important;
  cursor: pointer;
  border: 2px solid var(--primary, #6366f1) !important;
  border-radius: 50%;
  background: var(--card, #1e293b);
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  width: 36px !important;
  height: 36px !important;
}

.mobile-avatar img {
  width: 34px !important; 
  height: 34px !important;
  border-radius: 50%;
  object-fit: cover;
  display: block;
}

/* Optimize logout button for mobile */
#logoutBtn {
  padding: 0.5rem 1rem !important;
  font-size: 0.8rem !important;
  gap: 0.4rem !important;
  border-radius: 8px !important;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  color: var(--text, #f8fafc) !important;
  min-height: 40px !important;
}

.desktop-only {
  display: none !important;
}

/* ===== MAIN CONTENT LAYOUT - DARK THEME ===== */
.container {
  max-width: 100% !important;
  padding: 0 0.5rem !important;
  margin: 0.4rem auto !important;
  background: var(--darker, #020617) !important;
}

.main-content, main, .card {
  background: var(--darker, #020617) !important;
  color: var(--text, #f8fafc) !important;
}

/* ===== MOBILE CHAT OPTIMIZATION - DARK THEME ===== */
.chat-container {
  margin: 0.4rem 0 !important;
  border-radius: 12px !important;
  height: calc(100vh - 140px) !important;
  max-height: calc(100vh - 140px) !important;
  overflow: hidden !important;
  background: var(--darker, #020617) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  display: flex !important;
  flex-direction: column !important;
}

.card-header {
  padding: 0.8rem 1rem !important;
  font-size: 1rem !important;
  text-align: center !important;
  background: linear-gradient(135deg, var(--primary, #6366f1), var(--secondary, #f59e0b)) !important;
  color: var(--text, #f8fafc) !important;
  font-weight: 600 !important;
  border-radius: 12px 12px 0 0 !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;
  flex-shrink: 0 !important;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
}

.card-header h2 {
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: var(--text, #f8fafc) !important;
  margin: 0 !important;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.card-header i {
  font-size: 1.1rem !important;
  color: var(--text, #f8fafc) !important;
}

#enable-notifications {
  display: none !important;
}

/* ===== CHAT MESSAGES - DARK THEME ===== */
.chat-messages, #chatMessages {
  height: calc(100vh - 200px) !important;
  max-height: calc(100vh - 200px) !important;
  padding: 0.5rem 0.3rem !important;
  overflow-y: auto !important;
  scroll-behavior: smooth !important;
  background: var(--darker, #020617) !important;
  -webkit-overflow-scrolling: touch !important;
  flex: 1 !important;
  min-height: 0 !important;
  background-image: 
    radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(99, 102, 241, 0.03) 0%, transparent 50%);
  display: flex !important;
  flex-direction: column !important;
  gap: 0.4rem;
}

/* ===== MOBILE MESSAGE BUBBLES - DARK THEME ===== */
.message {
  margin: 0.4rem 0.2rem !important;
  padding: 0.6rem 0.8rem !important;
  max-width: 85% !important;
  font-size: 0.9rem !important;
  line-height: 1.4 !important;
  border-radius: 16px !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  animation: messageSlideIn 0.2s ease-out !important;
  word-break: break-word !important;
  position: relative !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  background: var(--card, #1e293b) !important;
  color: var(--text, #f8fafc) !important;
}

.message-sent {
  background: linear-gradient(135deg, var(--primary, #6366f1), var(--primary-dark, #4f46e5)) !important;
  color: var(--text, #f8fafc) !important;
  margin-left: auto !important;
  margin-right: 0.2rem !important;
  border-bottom-right-radius: 4px !important;
  align-self: flex-end;
  border-color: var(--primary-dark, #4f46e5) !important;
}

.message-received {
  background: var(--card, #1e293b) !important;
  color: var(--text, #f8fafc) !important;
  margin-right: auto !important;
  margin-left: 0.2rem !important;
  border-bottom-left-radius: 4px !important;
  align-self: flex-start;
  border-color: var(--card-border, rgba(148, 163, 184, 0.1)) !important;
}

.message-sender {
  font-size: 0.75rem !important;
  margin-bottom: 0.3rem !important;
  gap: 0.4rem !important;
  display: flex !important;
  align-items: center !important;
  font-weight: 600 !important;
  color: var(--secondary, #f59e0b) !important;
}

.message-sent .message-sender { 
  color: rgba(248, 250, 252, 0.9) !important; 
}

.chat-avatar {
  width: 32px !important;
  height: 32px !important;
  border: 2px solid var(--card-border, rgba(148, 163, 184, 0.3)) !important;
  flex-shrink: 0 !important;
  border-radius: 50% !important;
  object-fit: cover !important;
}

.user-role {
  font-size: 0.6rem !important;
  padding: 0.1rem 0.3rem !important;
  border-radius: 6px !important;
  white-space: nowrap !important;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  color: var(--gray, #94a3b8) !important;
}

.message-content {
  margin: 0.2rem 0 !important;
  line-height: 1.5 !important;
  word-break: break-word !important;
  font-size: 0.9rem !important;
}

.message-time {
  font-size: 0.65rem !important;
  margin-top: 0.3rem !important;
  color: var(--gray, #94a3b8) !important;
  text-align: right !important;
  opacity: 1 !important;
}

/* ===== MOBILE MESSAGE ACTIONS - DARK THEME ===== */
.message-actions {
  opacity: 1 !important;
  position: static !important;
  display: flex !important;
  gap: 0.2rem !important;
  margin-top: 0.4rem !important;
  justify-content: flex-end !important;
  background: none !important;
  padding: 0 !important;
  border-radius: 0 !important;
  backdrop-filter: none !important;
  box-shadow: none !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

.message-actions button {
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  padding: 0.25rem 0.4rem !important;
  border-radius: 8px !important;
  font-size: 0.7rem !important;
  min-height: 32px !important;
  min-width: 32px !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  color: var(--text, #f8fafc) !important;
}

.message-sent .message-actions button {
  background: rgba(248, 250, 252, 0.2) !important;
  border-color: rgba(248, 250, 252, 0.3) !important;
}

.message-actions button:active {
  transform: scale(0.95) !important;
  background: var(--card-hover, #334155) !important;
}

/* ===== MOBILE INPUT AREA - DARK THEME ===== */
.chat-input {
  padding: 0.8rem 0.5rem !important;
  background: var(--dark, #0f172a) !important;
  backdrop-filter: blur(15px) !important;
  border-top: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  gap: 0.5rem !important;
  position: sticky !important;
  bottom: 0 !important;
  z-index: 100 !important;
  display: flex !important;
  align-items: center !important;
  flex-shrink: 0 !important;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.3) !important;
  border-radius: 0 0 12px 12px !important;
}

.chat-input input, .chat-input textarea, #chatInput, #codeInput {
  padding: 0.6rem 0.8rem !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 25px !important;
  background: var(--card, #1e293b) !important;
  color: var(--text, #f8fafc) !important;
  font-size: 1rem !important;
  line-height: 1.4 !important;
  min-height: 44px !important;
  max-height: 100px !important;
  -webkit-appearance: none !important;
  flex: 1 !important;
  font-family: inherit !important;
  outline: none !important;
  box-shadow: none !important;
  transition: border-color 0.2s !important;
}

.chat-input input::placeholder, .chat-input textarea::placeholder,
#chatInput::placeholder, #codeInput::placeholder {
  color: var(--gray, #94a3b8) !important;
}

.chat-input input:focus, .chat-input textarea:focus,
#chatInput:focus, #codeInput:focus {
  border-color: var(--primary, #6366f1) !important;
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.25) !important;
}

/* ===== MOBILE BUTTONS - DARK THEME ===== */
.btn {
  min-height: 44px !important;
  min-width: 44px !important;
  padding: 0.6rem 1rem !important;
  border-radius: 8px !important;
  font-weight: 600 !important;
  transition: all 0.2s !important;
}

.btn-primary {
  background: var(--primary, #6366f1) !important;
  color: var(--text, #f8fafc) !important;
  border: none !important;
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3) !important;
}

.btn-primary:active {
  background: var(--primary-dark, #4f46e5) !important;
  transform: scale(0.95) !important;
}

.code-toggle, .emoji-toggle, .fullscreen-toggle, #emojiToggle {
  padding: 0.6rem !important;
  min-height: 44px !important;
  min-width: 44px !important;
  font-size: 1.2rem !important;
  border-radius: 50% !important;
  background: transparent !important;
  color: var(--gray, #94a3b8) !important;
  border: none !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.2s !important;
  cursor: pointer !important;
}

.code-toggle:active, .emoji-toggle:active, .fullscreen-toggle:active, #emojiToggle:active {
  transform: scale(0.95) !important;
  color: var(--primary, #6366f1) !important;
}

/* ===== MOBILE EMOJI PICKER - DARK THEME ===== */
.emoji-picker, #emojiPicker {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-height: 45vh !important;
  background: var(--dark, #0f172a) !important;
  border: none !important;
  border-radius: 20px 20px 0 0 !important;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4) !important;
  z-index: 1000 !important;
  overflow: hidden !important;
  transform: translateY(100%) !important;
  transition: transform 0.3s ease !important;
  border-top: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
}

.emoji-picker[style*="block"], #emojiPicker[style*="block"] {
  transform: translateY(0) !important;
}

.emoji-picker-header {
  padding: 0.8rem !important;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  background: var(--dark, #0f172a) !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 10 !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

.emoji-search {
  flex: 1 !important;
}

.emoji-search input {
  padding: 0.5rem 0.8rem !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 20px !important;
  background: var(--card, #1e293b) !important;
  color: var(--text, #f8fafc) !important;
  font-size: 0.9rem !important;
  -webkit-appearance: none !important;
  width: 100% !important;
  outline: none !important;
}

.emoji-search input::placeholder {
  color: var(--gray, #94a3b8) !important;
}

.emoji-search input:focus {
  border-color: var(--primary, #6366f1) !important;
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1) !important;
}

.emoji-close {
  background: none !important;
  border: none !important;
  color: var(--gray, #94a3b8) !important;
  cursor: pointer !important;
  padding: 0.5rem !important;
  border-radius: 8px !important;
  transition: all 0.2s ease !important;
}

.emoji-close:hover, .emoji-close:active {
  color: var(--primary, #6366f1) !important;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
}

.emoji-categories {
  gap: 0.2rem !important;
  margin-top: 0.6rem !important;
  justify-content: center !important;
  display: flex !important;
  padding: 0.5rem !important;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  background: var(--dark, #0f172a) !important;
  overflow-x: auto !important;
}

.emoji-category {
  padding: 0.3rem 0.6rem !important;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  border-radius: 12px !important;
  color: var(--gray, #94a3b8) !important;
  font-size: 0.75rem !important;
  white-space: nowrap !important;
  border: none !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  flex-shrink: 0 !important;
}

.emoji-category:active,
.emoji-category.active {
  background: var(--primary, #6366f1) !important;
  color: var(--text, #f8fafc) !important;
  transform: scale(0.95) !important;
}

.emoji-grid {
  grid-template-columns: repeat(8, 1fr) !important;
  gap: 0.1rem !important;
  padding: 0.6rem !important;
  max-height: 30vh !important;
  -webkit-overflow-scrolling: touch !important;
  display: grid !important;
  overflow-y: auto !important;
  background: var(--dark, #0f172a) !important;
}

.emoji-item {
  font-size: 1.3rem !important;
  padding: 0.3rem !important;
  min-height: 42px !important;
  min-width: 42px !important;
  -webkit-tap-highlight-color: transparent !important;
  background: none !important;
  border: none !important;
  cursor: pointer !important;
  border-radius: 8px !important;
  transition: background 0.15s !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.emoji-item:active {
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  transform: scale(0.9) !important;
}

/* ===== MOBILE DATE DIVIDERS - DARK THEME ===== */
.date-divider {
  margin: 1rem 0 0.6rem 0 !important;
  text-align: center !important;
}

.date-divider::before,
.date-divider::after {
  background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.1), transparent) !important;
}

.date-divider-text {
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  padding: 0.3rem 0.6rem !important;
  border-radius: 12px !important;
  font-size: 0.7rem !important;
  color: var(--gray, #94a3b8) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  margin: 0 0.6rem !important;
  min-width: 70px !important;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3) !important;
  display: inline-block !important;
  font-weight: 500 !important;
}

.date-divider-text.today {
  background: var(--primary, #6366f1) !important;
  border-color: var(--primary-dark, #4f46e5) !important;
  color: var(--text, #f8fafc) !important;
  font-weight: 600 !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 5 !important;
}
  
.date-divider-text.yesterday {
  background: var(--secondary, #f59e0b) !important;
  border-color: rgba(245, 158, 11, 0.3) !important;
  color: var(--text, #f8fafc) !important;
}

/* ===== MOBILE PINNED MESSAGES - DARK THEME ===== */
.pinned-message {
  padding: 0.4rem 0.6rem !important;
  gap: 0.5rem !important;
  min-height: 36px !important;
  background: var(--card, #1e293b) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 8px !important;
  margin: 0.3rem !important;
}

.pinned-user-info {
  min-width: 100px !important;
  gap: 0.4rem !important;
  display: flex !important;
  align-items: center !important;
}

.pinned-user-info img {
  width: 20px !important;
  height: 20px !important;
  border-radius: 50% !important;
}

.pinned-username {
  font-size: 0.7rem !important;
  color: var(--text, #f8fafc) !important;
  font-weight: 600 !important;
}

.pinned-content {
  font-size: 0.75rem !important;
  color: var(--gray, #94a3b8) !important;
}

.unpin-btn {
  width: 20px !important;
  height: 20px !important;
  font-size: 0.6rem !important;
  background: var(--danger, #ef4444) !important;
  color: var(--text, #f8fafc) !important;
  border: none !important;
  border-radius: 50% !important;
}

/* ===== MOBILE SCROLLBARS - DARK THEME ===== */
.chat-messages::-webkit-scrollbar, #chatMessages::-webkit-scrollbar {
  width: 4px !important;
}

.chat-messages::-webkit-scrollbar-track, #chatMessages::-webkit-scrollbar-track {
  background: var(--darker, #020617) !important;
}

.chat-messages::-webkit-scrollbar-thumb, #chatMessages::-webkit-scrollbar-thumb {
  background-color: var(--gray, #94a3b8) !important;
  border-radius: 2px !important;
}

.chat-messages::-webkit-scrollbar-thumb:hover, #chatMessages::-webkit-scrollbar-thumb:hover {
  background: var(--primary, #6366f1) !important;
}

.emoji-grid::-webkit-scrollbar {
  width: 4px !important;
}

.emoji-grid::-webkit-scrollbar-track {
  background: var(--dark, #0f172a) !important;
}

.emoji-grid::-webkit-scrollbar-thumb {
  background-color: var(--gray, #94a3b8) !important;
  border-radius: 2px !important;
}

/* ===== SIDEBAR ADJUSTMENTS - DARK THEME ===== */
.sidebar-grid {
  grid-template-columns: 1fr !important;
  gap: 1rem !important;
  padding: 0.5rem !important;
}

.sidebar-grid .card {
  background: var(--card, #1e293b) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 12px !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
}

.sidebar-grid .card .card-header {
  background: linear-gradient(135deg, var(--primary, #6366f1), var(--primary-dark, #4f46e5)) !important;
  color: var(--text, #f8fafc) !important;
  border-radius: 12px 12px 0 0 !important;
}

/* ===== HIDE CHAT CONTROLS ON MOBILE ===== */
.chat-controls {
  display: none !important;
}

/* ===== FOOTER - DARK THEME ===== */
footer {
  background: var(--dark, #0f172a) !important;
  border-top: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  color: var(--gray, #94a3b8) !important;
  padding: 1rem 0 0.8rem 0 !important;
  margin-top: 1rem !important;
}

/* ===== RESPONSIVE ADJUSTMENTS FOR SMALLER TABLETS ===== */
@media (max-width: 600px) {
  .emoji-grid {
    grid-template-columns: repeat(6, 1fr) !important;
  }
  
  .chat-input {
    padding: 0.7rem 0.4rem !important;
  }
  
  #chatInput, #codeInput {
    min-height: 42px !important;
    font-size: 0.95rem !important;
  }
  
  .btn, .code-toggle, .emoji-toggle, .fullscreen-toggle, #emojiToggle {
    min-height: 42px !important;
    min-width: 42px !important;
  }
  
  header {
    padding: 0.6rem 0.8rem !important;
    min-height: 56px !important;
  }
  
  .mobile-avatar {
    width: 34px !important;
    height: 34px !important;
  }
  
  .mobile-avatar img {
    width: 32px !important;
    height: 32px !important;
  }
}
}


  /* =========  MOBILE DESIGN ============ 480px */

@media (max-width: 480px) {
/* BASE STYLES - DARK THEME */
body, .chat-container {
  background: var(--darker, #020617) !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
  min-width: 100vw !important;
  min-height: 100vh !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  color: var(--text, #f8fafc) !important;
  font-size: 0.9rem;
  line-height: 1.4;
  margin: 0 !important;
  padding: 0 !important;
}

/* ===== HEADER - DARK THEME ===== */
header {
  background: var(--dark, #0f172a) !important;
  color: var(--text, #f8fafc) !important;
  padding: 0.5rem 0.8rem !important;
  min-height: 48px !important;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  position: sticky !important;
  top: 0 !important; 
  z-index: 1000 !important;
  backdrop-filter: none !important;
  width: 100vw !important;
  max-width: 100vw !important;
}

.logo {
  display: flex !important;
  align-items: center !important;
}

.logo::after {
  content: "Chill Space" !important;
  font-size: 1.05rem !important;
  color: var(--primary, #6366f1) !important;
  font-weight: 600 !important;
  background: none !important;
  letter-spacing: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  font-family: inherit !important;
  text-shadow: none !important;
}

.animated-text-container, .user-info, #subtitleText, .desktop-only {
  display: none !important;
}

.header-actions {
  margin-left: auto !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.4em !important;
}

.mobile-avatar {
  display: inline-block !important;
  margin-right: 0.4rem !important;
  cursor: pointer;
  border: 2px solid var(--primary, #6366f1) !important;
  border-radius: 50%;
  background: var(--card, #1e293b);
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  width: 32px !important;
  height: 32px !important;
}

.mobile-avatar img {
  width: 30px !important; 
  height: 30px !important;
  border-radius: 50%;
  object-fit: cover;
  display: block;
}

#logoutBtn {
  padding: 0.35em 0.7em !important;
  font-size: 0.8em !important;
  min-width: 32px !important;
  border-radius: 6px !important;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  color: var(--text, #f8fafc) !important;
}

/* ===== MAIN CONTENT LAYOUT ===== */
.main-content, main, .card {
  background: var(--darker, #020617) !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
  max-width: 100vw !important;
  color: var(--text, #f8fafc) !important;
}

/* ===== CHAT SECTION ===== */
.chat-container {
  order: 1;
  margin-bottom: 0.5rem !important;
  height: calc(100vh - 48px) !important;
  max-height: calc(100vh - 48px) !important;
  display: flex !important;
  flex-direction: column !important;
}

.card-header {
  background: var(--dark, #0f172a) !important;
  color: var(--text, #f8fafc) !important;
  border-radius: 0 !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;
  font-size: 0.95rem !important;
  text-align: left !important;
  padding: 0.6em 0.8em !important;
  letter-spacing: 0 !important;
  min-height: 44px !important;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5em;
  font-weight: 500;
  flex-shrink: 0;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1));
}

.card-header h2 {
  font-size: 0.95rem !important;
  font-weight: 500 !important;
  display: flex;
  align-items: center;
  gap: 0.4rem;
  color: var(--text, #f8fafc) !important;
}

.card-header i {
  font-size: 1rem !important;
  color: var(--primary, #6366f1) !important;
}

#enable-notifications {
  display: none !important;
}

/* ===== CHAT MESSAGES - DARK THEME ===== */
.chat-messages, #chatMessages {
  width: 100vw !important;
  padding: 0.5em 0.4em 0.8em 0.4em !important;
  background: var(--darker, #020617) !important;
  margin: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 0.3em;
  overflow-y: auto !important;
  flex: 1 !important;
  min-height: 0 !important;
  background-image: 
    radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(99, 102, 241, 0.03) 0%, transparent 50%);
}

/* ===== MESSAGE BUBBLES - DARK THEME ===== */
.message {
  font-size: 0.9rem !important;
  max-width: 85% !important;
  padding: 0.5rem 0.75rem !important;
  margin: 0.2rem 0.3rem !important;
  border-radius: 8px !important;
  background: var(--card, #1e293b) !important;
  color: var(--text, #f8fafc) !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3) !important;
  word-break: break-word !important;
  position: relative !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  transition: none;
  font-weight: 400;
}

.message-sent {
  background: var(--primary, #6366f1) !important;
  color: var(--text, #f8fafc) !important;
  margin-left: auto !important;
  border-bottom-right-radius: 2px !important;
  align-self: flex-end;
  border-color: var(--primary-dark, #4f46e5) !important;
}

.message-received {
  background: var(--card, #1e293b) !important;
  color: var(--text, #f8fafc) !important;
  margin-right: auto !important;
  border-bottom-left-radius: 2px !important;
  align-self: flex-start;
}

.message-sender {
  display: flex !important;
  align-items: center;
  font-size: 0.8rem !important;
  font-weight: 600;
  color: var(--secondary, #f59e0b);
  margin-bottom: 0.15rem;
  gap: 0.3rem;
  letter-spacing: 0;
  padding-left: 0;
}

.message-sent .message-sender { 
  color: #f59e0b !important; 
}

.chat-avatar {
  width: 24px !important;
  height: 24px !important;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 0.2rem;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1));
}

.message-content {
  margin: 0 !important;
  line-height: 1.4 !important;
  word-break: break-word !important;
  font-size: 0.9rem;
}

.message-time {
  font-size: 0.7rem !important;
  color: var(--gray, #94a3b8) !important;
  text-align: right !important;
  margin-top: 0.2rem !important;
  opacity: 1;
  letter-spacing: 0;
  font-weight: 400;
}

.user-role { display: none !important; }
.message-actions, .pin-btn, .message-delete { display: none !important; }

/* ===== DATE DIVIDERS - DARK THEME ===== */
.date-divider {
  margin: 0.8rem 0 0.4rem 0 !important;
  text-align: center;
}

.date-divider-text {
  font-size: 0.75rem !important;
  padding: 0.2em 0.8em !important;
  min-width: 60px !important;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  color: var(--gray, #94a3b8) !important;
  border-radius: 20px;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1));
  margin: 0 auto;
  display: inline-block;
  text-transform: none;
  font-weight: 500;
  box-shadow: none;
  opacity: 1;
}

.date-divider-text.today {
  background: var(--primary, #6366f1) !important;
  color: var(--text, #f8fafc) !important;
  font-weight: 600;
  border-color: var(--primary-dark, #4f46e5);
}

/* ===== INPUT AREA - DARK THEME ===== */
.chat-input {
  position: relative !important;
  bottom: auto !important;
  left: auto !important;
  right: auto !important;
  width: 100% !important;
  z-index: auto !important;
  display: flex !important;
  align-items: center !important;
  background: var(--dark, #0f172a) !important;
  box-shadow: 0 -1px 3px rgba(0,0,0,0.3);
  border-radius: 0 !important;
  padding: 0.7em 0.9em !important;
  gap: 0.6em !important;
  border-top: 1px solid var(--card-border, rgba(148, 163, 184, 0.1));
  flex-shrink: 0 !important;
  min-height: 58px !important;
}

/* Input Fields - Dark Theme */
#chatInput, #codeInput {
  flex: 1 !important;
  border-radius: 20px !important;
  background: var(--card, #1e293b) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  padding: 0.7em 1.1em !important;
  font-size: 0.95em !important;
  color: var(--text, #f8fafc) !important;
  min-height: 42px !important;
  height: 42px !important;
  box-shadow: none !important;
  outline: none !important;
  font-family: inherit !important;
  font-weight: 400 !important;
  transition: border-color 0.2s !important;
  resize: none !important;
  box-sizing: border-box !important;
  line-height: 1.4 !important;
}

#chatInput::placeholder, #codeInput::placeholder {
  color: var(--gray, #94a3b8) !important;
}

#chatInput:focus, #codeInput:focus {
  border-color: var(--primary, #6366f1) !important;
  box-shadow: 0 0 0 1px var(--primary, #6366f1) !important;
}

/* Send Button - Dark Theme */
.chat-input .btn.btn-primary {
  width: 42px !important; 
  height: 42px !important; 
  min-width: 42px !important;
  min-height: 42px !important;
  border-radius: 50% !important;
  font-size: 1.2rem !important;
  background: var(--primary, #6366f1) !important;
  color: var(--text, #f8fafc) !important;
  border: none !important;
  display: flex !important; 
  align-items: center !important; 
  justify-content: center !important;
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3) !important;
  transition: all 0.2s !important;
  flex-shrink: 0 !important;
  padding: 0 !important;
  cursor: pointer;
}

.chat-input .btn.btn-primary:active { 
  background: var(--primary-dark, #4f46e5) !important; 
  transform: scale(0.95) !important;
}

/* Emoji Toggle Button - Dark Theme */
#emojiToggle {
  width: 42px !important; 
  height: 42px !important;
  min-width: 42px !important;
  min-height: 42px !important;
  border-radius: 50% !important;
  font-size: 1.2rem !important;
  background: transparent !important;
  color: var(--gray, #94a3b8) !important;
  border: none !important;
  display: flex !important; 
  align-items: center !important; 
  justify-content: center !important;
  transition: all 0.2s !important;
  flex-shrink: 0 !important;
  cursor: pointer;
}

#emojiToggle:active { 
  color: var(--primary, #6366f1) !important; 
  transform: scale(0.95) !important;
}

/* Hide other chat controls on mobile */
.chat-controls {
  display: none !important;
}

/* ===== EMOJI PICKER - DARK THEME ===== */
#emojiPicker {
  position: fixed !important;
  width: 100vw !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  border-radius: 12px 12px 0 0 !important;
  box-shadow: 0 -4px 20px rgba(0,0,0,0.4) !important;
  padding: 0.8rem 0.5rem 0.6rem 0.5rem !important;
  background: var(--dark, #0f172a) !important;
  min-height: 280px !important;
  max-height: 35vh !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-bottom: none !important;
  z-index: 1000 !important;
  display: none;
  overflow: hidden;
}

.emoji-picker-header {
  padding: 0.5rem !important;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  background: var(--dark, #0f172a) !important;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.emoji-search {
  flex: 1;
}

.emoji-search input {
  width: 100%;
  padding: 0.4rem 0.8rem !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 20px !important;
  background: var(--card, #1e293b) !important;
  color: var(--text, #f8fafc) !important;
  font-size: 0.85rem !important;
  outline: none;
}

.emoji-search input::placeholder {
  color: var(--gray, #94a3b8) !important;
}

.emoji-search input:focus {
  border-color: var(--primary, #6366f1) !important;
}

.emoji-close {
  background: none;
  border: none;
  color: var(--gray, #94a3b8);
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.emoji-close:hover {
  color: var(--primary, #6366f1);
  background: var(--card-bg, rgba(15, 23, 42, 0.7));
}

.emoji-categories {
  display: flex;
  gap: 0.2rem;
  padding: 0.5rem;
  border-bottom: 1px solid var(--card-border, rgba(148, 163, 184, 0.1));
  background: var(--dark, #0f172a);
  overflow-x: auto;
  justify-content: center;
}

.emoji-category {
  background: none;
  border: none;
  color: var(--gray, #94a3b8);
  cursor: pointer;
  padding: 0.3rem 0.6rem;
  border-radius: 12px;
  transition: all 0.2s ease;
  font-size: 0.75rem;
  white-space: nowrap;
  flex-shrink: 0;
}

.emoji-category:active,
.emoji-category.active {
  background: var(--primary, #6366f1);
  color: var(--text, #f8fafc);
  transform: scale(0.95);
}

.emoji-grid { 
  display: grid;
  grid-template-columns: repeat(8, 1fr) !important;
  gap: 0.1rem !important;
  padding: 0.3rem !important;
  max-height: 25vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background: var(--dark, #0f172a);
}

.emoji-item {
  min-height: 36px !important; 
  min-width: 36px !important;
  font-size: 1.2rem !important; 
  padding: 0.2rem !important;
  text-align: center;
  border-radius: 6px !important;
  background: none !important;
  border: none;
  cursor: pointer;
  transition: background 0.15s;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-tap-highlight-color: transparent;
}

.emoji-item:active {
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  transform: scale(0.95);
}

/* Responsive adjustments for smaller screens */
@media (max-width: 400px) {
.emoji-grid {
  grid-template-columns: repeat(6, 1fr) !important;
}

.chat-input {
  padding: 0.6em 0.8em !important;
  min-height: 56px !important;
}

#chatInput, #codeInput {
  min-height: 40px !important;
  height: 40px !important;
  font-size: 0.9em !important;
}

.chat-input .btn.btn-primary,
#emojiToggle {
  width: 40px !important;
  height: 40px !important;
  min-width: 40px !important;
  min-height: 40px !important;
  font-size: 1.1rem !important;
}
}

/* ===== FILE UPLOAD SECTION - DARK THEME ===== */
.sidebar-grid {
  display: flex !important;
  flex-direction: column !important;
  gap: 0.8rem !important;
  order: 2;
  padding: 0.4rem !important;
  width: 100vw !important;
  margin-top: 0.5rem !important;
}

/* FILE UPLOAD CARD - DARK THEME */
.sidebar-grid .card:first-child {
  background: var(--card, #1e293b) !important;
  border-radius: 12px !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3) !important;
  margin: 0.4rem !important;
  padding: 0.8rem !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
}

.sidebar-grid .card:first-child .card-header {
  background: linear-gradient(135deg, var(--primary, #6366f1), var(--primary-dark, #4f46e5)) !important;
  color: var(--text, #f8fafc) !important;
  border-radius: 8px 8px 0 0 !important;
  font-size: 0.9rem !important;
  padding: 0.6em 0.8em !important;
  margin: -0.8rem -0.8rem 0.8rem -0.8rem !important;
  position: static !important;
}

.upload-area {
  border: 2px dashed var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 12px !important;
  padding: 1.5rem 1rem !important;
  text-align: center;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  transition: all 0.3s ease;
  margin: 0.8rem 0 !important;
  position: relative;
}

.upload-area:active {
  border-color: var(--primary, #6366f1) !important;
  background: var(--card-hover, #334155) !important;
}

.upload-area i {
  font-size: 2.5rem !important;
  color: var(--primary, #6366f1) !important;
  margin-bottom: 0.5rem !important;
  display: block;
}

.upload-area h3 {
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: var(--text, #f8fafc) !important;
  margin: 0.5rem 0 0.3rem 0 !important;
}

.upload-area p {
  font-size: 0.85rem !important;
  color: var(--gray, #94a3b8) !important;
  margin: 0 !important;
}

.upload-area input[type="file"] {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: pointer;
}

/* FILE PREVIEW - DARK THEME */
.file-preview {
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 8px !important;
  padding: 0.8rem !important;
  margin: 0.8rem 0 !important;
  max-height: 200px;
  overflow-y: auto;
}

.file-preview h4 {
  font-size: 0.85rem !important;
  font-weight: 600 !important;
  color: var(--text, #f8fafc) !important;
  margin-bottom: 0.5rem !important;
  display: flex;
  align-items: center;
  gap: 0.3rem;
}

.preview-item {
  background: var(--card, #1e293b) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 6px !important;
  padding: 0.6rem !important;
  margin-bottom: 0.5rem !important;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.8rem;
}

.preview-icon {
  color: var(--primary, #6366f1) !important;
  font-size: 1.2rem !important;
}

.preview-info {
  flex: 1;
  min-width: 0;
}

.preview-name {
  font-weight: 500;
  color: var(--text, #f8fafc) !important;
  font-size: 0.8rem !important;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.preview-size {
  font-size: 0.7rem !important;
  color: var(--gray, #94a3b8) !important;
  margin-top: 0.1rem;
}

.preview-remove {
  background: var(--danger, #ef4444) !important;
  border: none;
  color: white;
  width: 28px !important;
  height: 28px !important;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem !important;
  flex-shrink: 0;
}

.preview-remove:active {
  background: #dc2626 !important;
  transform: scale(0.95);
}

/* UPLOAD BUTTON - DARK THEME */
.btn-primary {
  background: var(--primary, #6366f1) !important;
  color: var(--text, #f8fafc) !important;
  border: none !important;
  border-radius: 8px !important;
  padding: 0.7rem 1.2rem !important;
  font-size: 0.85rem !important;
  font-weight: 600 !important;
  width: 100% !important;
  margin-top: 0.5rem !important;
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
  transition: all 0.2s;
}

.btn-primary:active {
  background: var(--primary-dark, #4f46e5) !important;
  transform: translateY(1px);
}

/* ===== SHARED FILES SECTION - DARK THEME ===== */
.sidebar-grid .card:nth-child(2) {
  background: var(--card, #1e293b) !important;
  border-radius: 12px !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3) !important;
  margin: 0.4rem !important;
  padding: 0.8rem !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
}

.sidebar-grid .card:nth-child(2) .card-header {
  background: linear-gradient(135deg, var(--primary, #6366f1), var(--primary-dark, #4f46e5)) !important;
  color: var(--text, #f8fafc) !important;
  border-radius: 8px 8px 0 0 !important;
  font-size: 0.9rem !important;
  padding: 0.6em 0.8em !important;
  margin: -0.8rem -0.8rem 0.8rem -0.8rem !important;
  position: static !important;
}

.file-list {
  max-height: 250px;
  overflow-y: auto;
}

.file-item {
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 8px !important;
  padding: 0.6rem !important;
  margin-bottom: 0.6rem !important;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.file-item:active {
  background: var(--card-hover, #334155) !important;
  transform: scale(0.98);
}

.file-icon {
  color: #4f46e5 !important;
  font-size: 1.2rem !important;
  flex-shrink: 0;
}

.file-details {
  flex: 1;
  min-width: 0;
}

.file-name {
  font-weight: 500;
  color: var(--text, #f8fafc) !important;
  font-size: 0.8rem !important;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.file-meta {
  font-size: 0.7rem !important;
  color: var(--gray, #94a3b8) !important;
  margin-top: 0.1rem;
}

.file-actions {
  display: flex;
  gap: 0.3rem;
  flex-shrink: 0;
}

.file-actions .btn {
  padding: 0.4rem !important;
  min-width: 32px !important;
  min-height: 32px !important;
  font-size: 0.8rem !important;
  border-radius: 6px !important;
}

/* ===== ONLINE MEMBERS SECTION - DARK THEME ===== */
.sidebar-grid .card:nth-child(3) {
  background: var(--card, #1e293b) !important;
  border-radius: 12px !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3) !important;
  margin: 0.4rem !important;
  padding: 0.8rem !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
}

.sidebar-grid .card:nth-child(3) .card-header {
  background: linear-gradient(135deg, var(--primary, #6366f1), var(--primary-dark, #4f46e5)) !important;
  color: var(--text, #f8fafc) !important;
  border-radius: 8px 8px 0 0 !important;
  font-size: 0.9rem !important;
  padding: 0.6em 0.8em !important;
  margin: -0.8rem -0.8rem 0.8rem -0.8rem !important;
  position: static !important;
}

.members-list {
  max-height: 200px;
  overflow-y: auto;
}

.member {
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  border-radius: 8px !important;
  padding: 0.5rem !important;
  margin-bottom: 0.5rem !important;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.member-avatar {
  width: 32px !important;
  height: 32px !important;
  border-radius: 50%;
  flex-shrink: 0;
}

.member-avatar img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}

.member-info {
  flex: 1;
  min-width: 0;
}

.member-name {
  font-size: 0.8rem !important;
  font-weight: 600;
  color: var(--text, #f8fafc) !important;
}

.member-role {
  font-size: 0.7rem !important;
  color: var(--gray, #94a3b8) !important;
}

/* ===== GAMES SECTION - DARK THEME ===== */
.games-section {
  background: var(--card, #1e293b) !important;
  margin: 0.4rem !important;
  border-radius: 12px !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3) !important;
  padding: 0.8rem !important;
  width: calc(100vw - 0.8rem) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  order: 3;
}

.games-section .card-header {
  background: linear-gradient(135deg, var(--primary, #6366f1), var(--primary-dark, #4f46e5)) !important;
  color: var(--text, #f8fafc) !important;
  border-radius: 8px 8px 0 0 !important;
  font-size: 0.9rem !important;
  padding: 0.6em 0.8em !important;
  margin: -0.8rem -0.8rem 0.8rem -0.8rem !important;
  position: static !important;
}

.games-grid {
  display: flex !important;
  flex-direction: column !important;
  gap: 0.8rem !important;
  padding: 0 !important;
  width: 100% !important;
}

.game-card {
  display: flex !important;
  flex-direction: row !important;
  overflow: hidden !important;
  border-radius: 12px !important;
  background: var(--card-bg, rgba(15, 23, 42, 0.7)) !important;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2) !important;
  margin: 0;
  width: 100% !important;
  transition: all 0.2s;
}

.game-card:active {
  background: var(--card-hover, #334155) !important;
  transform: scale(0.98);
}

.game-image {
  width: 80px !important;
  height: 80px !important;
  position: relative;
  overflow: hidden !important;
  background: var(--card, #1e293b) !important;
  border-radius: 8px !important;
  flex-shrink: 0;
  margin: 0.6rem;
}

.game-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: none;
  display: block;
}

.game-overlay {
  position: absolute; 
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(99, 102, 241, 0.8);
  display: flex; 
  align-items: center; 
  justify-content: center;
  opacity: 1;
  pointer-events: none;
}

.game-overlay i {
  color: var(--text, #f8fafc) !important;
  font-size: 1.5rem !important;
  opacity: 1;
}

.game-info {
  padding: 0.8em 0.8em 0.8em 0 !important;
  background: transparent !important;
  display: flex; 
  flex-direction: column; 
  gap: 0.3em;
  flex: 1;
  min-width: 0;
}

.game-name {
  color: var(--text, #f8fafc) !important;
  font-size: 0.95rem !important;
  font-weight: 600 !important;
  letter-spacing: 0;
  margin-bottom: 0.2rem !important;
  line-height: 1.3;
}

.game-description {
  color: var(--gray, #94a3b8) !important;
  font-size: 0.8rem !important;
  line-height: 1.3 !important;
  font-weight: 400;
  margin: 0 !important;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.game-details, .game-tags {
  display: none !important;
}

/* ===== HIDE PINNED MESSAGES ===== */
.pinned-messages-section, .pinned-messages {
  display: none !important;
}

/* ===== MOBILE PROFILE MODAL - DARK THEME ===== */
#mobileProfileModal {
  display: none;
  position: fixed;
  top: 0; left: 0; width: 100vw; height: 100vh; 
  z-index: 25000;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(8px);
  align-items: center;
  justify-content: center;
}

#mobileProfileModal > div {
  background: var(--card, #1e293b);
  max-width: 300px;
  width: 90vw;
  margin: 0 auto;
  border-radius: 12px;
  padding: 1.5em 1em 1em 1em;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  text-align: center;
  position: relative;
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.1));
}

#mobileProfileModal button {
  background: var(--danger, #ef4444) !important;
  color: var(--text, #f8fafc) !important;
  border: none !important;
  border-radius: 50% !important;
  width: 28px !important; 
  height: 28px !important;
  position: absolute; 
  top: 10px; 
  right: 10px;
  font-size: 1em;
  transition: all 0.2s;
}

#mobileProfileModal button:active { 
  background: #dc2626 !important;
  transform: scale(0.95);
}

#mobileProfileImg {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 0.5em;
  border: 2px solid var(--primary, #6366f1);
  background: var(--card-bg, rgba(15, 23, 42, 0.7));
}

#mobileProfileName {
  font-weight: 600;
  font-size: 1em;
  color: var(--text, #f8fafc);
  margin-bottom: 0.2em;
}

#mobileProfileEmail {
  color: var(--primary, #6366f1);
  font-size: 0.85em;
  margin-top: 0.1em;
  font-weight: 500;
}

#mobileProfileDob {
  color: var(--gray, #94a3b8);
  font-size: 0.8em;
  margin-top: 0.1em;
  font-style: normal;
}

/* ===== FOOTER - DARK THEME ===== */
footer {
  background: var(--dark, #0f172a) !important;
  border-top: 1px solid var(--card-border, rgba(148, 163, 184, 0.1)) !important;
  color: var(--gray, #94a3b8) !important;
  padding: 1rem 0 0.8rem 0 !important;
  font-size: 0.8em !important;
  text-align: center !important;
  min-height: 48px !important;
  box-shadow: none !important;
  margin: 0 !important;
  width: 100vw !important;
  order: 4;
}

footer div, footer a, footer span, footer i { 
  color: var(--gray, #94a3b8) !important; 
}

footer a:hover { 
  color: var(--primary, #6366f1) !important; 
}

/* ===== BUTTON OVERRIDES - DARK THEME ===== */
.btn-outline-primary {
  border-color: var(--primary, #6366f1) !important;
  color: var(--primary, #6366f1) !important;
  background: transparent !important;
}

.btn-outline-primary:hover {
  background: var(--primary, #6366f1) !important;
  color: var(--text, #f8fafc) !important;
}

.btn-outline-danger {
  border-color: var(--danger, #ef4444) !important;
  color: var(--danger, #ef4444) !important;
  background: transparent !important;
}

.btn-outline-danger:hover {
  background: var(--danger, #ef4444) !important;
  color: var(--text, #f8fafc) !important;
}

/* ===== SCROLLBARS - DARK THEME ===== */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: var(--darker, #020617);
}

::-webkit-scrollbar-thumb {
  background: var(--gray, #94a3b8);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--primary, #6366f1);
}
.toast, .toaster, [class*="toast"] {
z-index: 1010 !important;
}



/* ===== SMALLER SCREENS ===== */
@media (max-width: 400px) {
  .game-image {
    width: 70px !important;
    height: 70px !important;
  }
  
  .game-name {
    font-size: 0.9rem !important;
  }
  
  .game-description {
    font-size: 0.75rem !important;
  }
}

/* ===== HIDE UNUSED ELEMENTS ===== */
.user-info { display: none !important; }
.chatbot-modal-header { display: none !important; }

/* ===== TYPING INDICATOR ===== */
.typing {
  margin: 0.3rem 0.4rem !important;
  padding: 0.4rem 0.6rem !important;
  background: rgba(255,255,255,0.9) !important;
  border-radius: 12px !important;
  font-size: 0.8rem !important;
}

.typing .avatar {
  width: 24px !important;
  height: 24px !important;
}

.typing .bubble {
  background: #e1e5e9 !important;
  color: #1f2937 !important;
  border-radius: 12px 12px 12px 4px !important;
  padding: 0.4rem 0.6rem !important;
}

.typing .dot {
  background: #075e54 !important;
}
}
/* ===== HIDE HEADER WHEN CHATBOT MODAL IS OPEN ===== */
body.chatbot-modal-open header {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  transform: translateY(-100%) !important;
  transition: all 0.3s ease !important;
}

/* ===== ADJUST CHATBOT MODAL FOR FULL SCREEN ===== */
body.chatbot-modal-open .chatbot-modal {
  top: 0 !important;
  height: 100vh !important;
  z-index: 99999 !important;
}

body.chatbot-modal-open .chatbot-modal-content {
  height: 100vh !important;
  width: 100vw !important;
}

body.chatbot-modal-open .chatbot-iframe {
  height: 100vh !important;
  width: 100vw !important;
}

/* ===== ENSURE CLOSE BUTTON IS VISIBLE ===== */
body.chatbot-modal-open .chatbot-modal-close {
  position: fixed !important;
  top: 1rem !important;
  right: 1rem !important;
  z-index: 100000 !important;
  background: rgba(239, 68, 68, 0.9) !important;
  backdrop-filter: blur(10px) !important;
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
}

/* ===== PREVENT SCROLLING WHEN MODAL IS OPEN ===== */
body.chatbot-modal-open {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
  height: 100% !important;
}

/* TUNE small screens further if needed */
@media (max-width: 400px) {
  .game-info { padding: 0.66em 0.4em 0.61em 0.46em !important;}
  .games-section .card-header { font-size:0.98em!important;}
  .chat-messages, #chatMessages { font-size: 0.96em; }
  .emoji-grid { grid-template-columns: repeat(6, 1fr) !important;}
}


  /* ===== LANDSCAPE MODE ===== */
  @media (max-width: 768px) and (orientation: landscape) {
    .chat-messages {
      height: calc(100vh - 120px);
      max-height: calc(100vh - 120px);
    }
    
    .emoji-picker {
      max-height: 55vh;
    }
    
    .chat-input {
      padding: 0.6rem 0.5rem;
    }
    
    .chat-input input, .chat-input textarea {
      min-height: 40px;
      font-size: 0.9rem;
    }
    
    .btn {
      min-height: 40px;
      min-width: 40px;
    }
  }

  /* ===== ACCESSIBILITY & TOUCH ===== */
  @media (max-width: 1024px) {
    button, 
    .emoji-item, 
    .message-delete, 
    .pin-btn, 
    input, 
    textarea {
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
      -webkit-touch-callout: none;
    }
    
    button {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    input:focus, 
    button:focus, 
    textarea:focus {
      outline: 2px solid #007bff;
      outline-offset: 2px;
    }
    
    * {
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }
  }

  /* ===== ALL OTHER EXISTING STYLES ===== */

  /* File upload styles */
  .file-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .file-item {
    background: rgba(30, 41, 59, 0.5);
    padding: 0.8rem 1rem;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    cursor: pointer;
    gap: 0.75rem;
    min-height: 60px;
    animation: fileSlideIn 0.4s ease-out;
  }

  .file-item:hover {
    background: rgba(30, 41, 59, 0.8);
    transform: translateX(2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
    border: 1px solid rgba(99, 102, 241, 0.3);
  }

  @keyframes fileSlideIn {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .file-info {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
    min-width: 0; 
    overflow: hidden;
  }

  .file-icon {
    color: var(--secondary);
    flex-shrink: 0; 
  }

  .file-details {
    flex: 1;
    min-width: 0; 
    overflow: hidden;
  }

  .file-name {
    font-weight: 500;
    color: var(--light);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }

  .file-meta {
    font-size: 0.75rem;
    color: var(--gray);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .file-actions {
    display: flex;
    gap: 0.5rem;
    flex-shrink: 0; 
  }

  .file-actions button {
    cursor: pointer;
    flex-shrink: 0;
  }

  .upload-area {
    position: relative;
    border: 2px dashed var(--gray);
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
    transition: all 0.3s ease;
    margin-top: 1rem;
  }

  .upload-area:hover {
    border-color: var(--primary);
  }

  .upload-area input {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    opacity: 0;
    cursor: pointer;
  }

  .upload-area p {
    color: var(--gray);
    margin-top: 0.5rem;
    font-size: 0.875rem;
  }

  .file-preview {
    margin-top: 1rem;
    padding: 1rem;
    background: rgba(30, 41, 59, 0.5);
    border-radius: 8px;
    border: 1px solid var(--card-border);
    max-height: 300px;
    overflow-y: auto;
  }

  .file-preview h4 {
    color: var(--light);
    margin-bottom: 0.75rem;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .preview-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.75rem;
    background: rgba(15, 23, 42, 0.3);
    border-radius: 8px;
    margin-bottom: 0.75rem;
    word-break: break-word;
    overflow-wrap: break-word;
    min-height: 60px;
    flex-wrap: wrap;
  }

  .preview-item:last-child {
    margin-bottom: 0;
  }

  .preview-icon {
    color: var(--secondary);
    font-size: 1.2rem;
  }

  .preview-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    max-width: calc(100% - 80px);
  }

  .preview-name {
    font-weight: 500;
    color: var(--light);
    font-size: 0.875rem;
    word-break: break-all;
    overflow-wrap: break-word;
    max-width: 120px;
    line-height: 1.3;
    white-space: normal;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .preview-size {
    font-size: 0.75rem;
    color: var(--gray);
  }

  .preview-image {
    max-width: 60px;
    max-height: 60px;
    border-radius: 4px;
    object-fit: cover;
  }

  .preview-remove {
    background: var(--danger);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.875rem;
    transition: all 0.2s ease;
    min-width: 32px;
    min-height: 32px;
    touch-action: manipulation;
  }

  .preview-remove:hover {
    background: #dc2626;
    transform: scale(1.1);
  }

  .no-files {
    color: var(--gray);
    font-style: italic;
    text-align: center;
    padding: 1rem;
  }

  /* Members list */
  .members-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .member {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem;
    border-radius: 8px;
    transition: all 0.2s ease;
  }

  .member:hover {
    background: rgba(30, 41, 59, 0.5);
  }

  .member-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--primary-dark);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    position: relative;
  }

  .member-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    background: var(--primary-dark);
  }

  .member-info {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
    flex: 1;
  }

  .member-name {
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .member-role {
    opacity: 0.8;
    font-size: 0.8rem;
  }

  .member-status {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--success);
    border: 2px solid var(--dark);
    position: absolute;
    bottom: -2px;
    right: -2px;
    box-shadow: 0 0 0 2px var(--success);
  }

  .online {
    background: var(--success);
    box-shadow: 0 0 0 2px var(--success);
  }

  .offline {
    background: var(--gray);
    box-shadow: 0 0 0 2px var(--gray);
  }

  /* Games section */
  .games-section {
    width: 100%;
  }

  .games-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 1.5rem;
    margin-top: 1rem;
  }

  @media (max-width: 1400px) {
    .games-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  @media (max-width: 1100px) {
    .games-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 800px) {
    .games-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }
  }

  @media (max-width: 500px) {
    .games-grid {
      grid-template-columns: 1fr;
    }
  }

  .game-card {
    background: rgba(30, 41, 59, 0.3);
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid var(--card-border);
    position: relative;
    backdrop-filter: blur(10px);
    min-width: 0;
  }

  .game-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
    border-color: var(--primary);
  }

  .game-image {
    position: relative;
    height: 160px;
    overflow: hidden;
  }

  .game-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .game-card:hover .game-image img {
    transform: scale(1.05);
  }

  .game-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
  }

  .game-card:hover .game-overlay {
    opacity: 1;
  }

  .game-overlay i {
    color: var(--primary);
    font-size: 2rem;
    transform: scale(0.8);
    transition: transform 0.3s ease;
  }

  .game-card:hover .game-overlay i {
    transform: scale(1);
  }

  .game-info {
    padding: 1.25rem;
  }

  .game-name {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--light);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .game-description {
    color: var(--gray);
    font-size: 0.875rem;
    line-height: 1.4;
    margin-bottom: 1rem;
  }

  .game-details {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1rem;
    gap: 1rem;
  }

  .game-players,
  .game-difficulty {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.8rem;
    color: var(--gray);
  }

  .game-difficulty i {
    color: var(--secondary);
  }

  .game-players i {
    color: var(--primary);
  }

  .game-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .tag {
    background: var(--primary);
    color: white;
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .tag:nth-child(even) {
    background: var(--secondary);
  }

  /* Code block styling */
  .code-block {
    background: var(--darker);
    border: 1px solid var(--card-border);
    border-radius: 8px;
    margin: 0.5rem 0;
    overflow: hidden;
    font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
  }

  .code-header {
    background: rgba(30, 41, 59, 0.8);
    padding: 0.5rem 1rem;
    border-bottom: 1px solid var(--card-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--gray);
  }

  .code-language {
    font-weight: 500;
    color: var(--secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .code-copy {
    background: none;
    border: none;
    color: var(--gray);
    cursor: pointer;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
    margin-right: 4rem;
  }

  .code-copy:hover {
    color: var(--light);
    background: rgba(148, 163, 184, 0.1);
  }

  .code-content {
    padding: 1rem;
    font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
    white-space: pre-wrap;
    overflow-x: auto;
    color: var(--light);
    background: var(--darker);
  }

  .code-content code {
    font-family: inherit;
    font-size: inherit;
    color: inherit;
    background: none;
    padding: 0;
    border-radius: 0;
  }

  .code-content {
    color: #e2e8f0;
  }

  /* Language select */
  .language-select {
    background: var(--dark);
    border: 1px solid var(--card-border);
    border-radius: 6px;
    padding: 0.25rem 0.5rem;
    color: var(--light);
    font-size: 0.75rem;
    cursor: pointer;
  }

  .language-select:focus {
    outline: none;
    border-color: var(--primary);
  }

  /* Fullscreen Code Editor */
  .fullscreen-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 10000;
    display: none;
    backdrop-filter: blur(5px);
  }

  .fullscreen-editor {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 2rem;
    box-sizing: border-box;
  }

  .fullscreen-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--card-border);
  }

  .fullscreen-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--light);
  }

  .fullscreen-controls {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .fullscreen-textarea {
    flex: 1;
    background: var(--dark);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: 1.5rem;
    color: var(--light);
    font-family: 'Courier New', monospace;
    font-size: 1rem;
    line-height: 1.6;
    resize: none;
    outline: none;
    margin-bottom: 1rem;
  }

  .fullscreen-textarea:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
  }

  .fullscreen-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
  }

  /* File preview modal */
  .preview-modal{
    position:fixed; 
    inset:0; 
    background:rgba(0,0,0,.85);
    z-index:11000; 
    display:none; 
    align-items:center; 
    justify-content:center;
  }

  .preview-modal.open{
    display:flex;
  }

  .preview-modal-content{
    background:var(--dark); 
    border:1px solid var(--card-border);
    border-radius:12px; 
    max-width:90vw; 
    max-height:98vh;
    height: 80vh; 
    width:900px;
    padding:1rem; 
    position:relative; 
    overflow:hidden;
  }

  .preview-modal-close{
    position:absolute; 
    top:8px; 
    right:8px;
    background:var(--danger); 
    color:#fff; 
    border:none; 
    border-radius:50%;
    width:34px; 
    height:34px; 
    cursor:pointer;
  }

  .preview-modal iframe,
  .preview-modal pre{
    width:100%; 
    max-height:98vh; 
    border:none;
    height: 80vh;
  }

  .preview-modal img,
  .preview-model-content{
    width: 100%; 
    max-height: 88vh; 
    object-fit: contain;
  }

  .preview-modal-content.img-fit {
    height:auto;
    max-height:90vh;
    overflow:visible;
    padding:0;
  }

  .preview-modal-content.img-fit img {
    max-height:90vh;
  }

  .preview-modal pre{
    color:var(--light); 
    white-space:pre-wrap;
  }

  /* Profile edit modal */
  .profile-edit-modal {
    position: fixed; 
    inset: 0; 
    background:rgba(0,0,0,0.92);
    z-index:11000; 
    display:none; 
    align-items:center; 
    justify-content:center;
  }

  .profile-edit-modal.open { 
    display: flex; 
  }

  .profile-edit-content {
    background: var(--dark); 
    border: 1px solid var(--card-border);
    border-radius: 16px; 
    padding: 2rem 2.3rem; 
    min-width:340px; 
    max-width: 95vw;
    position: relative; 
    box-shadow: 0 8px 40px rgba(0,0,0,0.28);
    color: var(--light);
  }

  .profile-edit-close {
    position: absolute; 
    top: 10px; 
    right: 14px; 
    background: var(--danger);
    color:#fff; 
    border:none; 
    border-radius:50%; 
    width:34px; 
    height:34px;
    cursor:pointer;
  }

  .profile-edit-avatar { 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    margin-bottom:1.4em;
  }

  .profile-edit-avatar img { 
    width: 90px; 
    height: 90px; 
    border-radius: 50%; 
    margin-bottom:0.6em; 
    object-fit: cover;
  }

  .profile-edit-avatar input[type="file"] { 
    display:block; 
  }

  .profile-edit-field { 
    margin-bottom:1em; 
  }

  .profile-edit-field label { 
    font-weight:500; 
    margin-bottom:0.45em; 
    display:block;
  }

  .profile-edit-field input[type="text"], 
  .profile-edit-field input[type="date"] {
    width: 100%; 
    padding: 0.7em 1em; 
    border-radius:7px; 
    border: 1px solid var(--card-border);
    background: var(--darker); 
    color: var(--light);
  }

  /* Game modal */
  .game-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    z-index: 10000;
    display: none;
    backdrop-filter: blur(10px);
  }

  .game-modal-content {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  .game-modal-header {
    background: var(--dark);
    padding: 1rem 2rem;
    border-bottom: 1px solid var(--card-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .game-modal-title {
    color: var(--light);
    font-size: 1.2rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .game-modal-close {
    background: var(--danger);
    border: none;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .game-modal-close:hover {
    background: #dc2626;
    transform: translateY(-1px);
  }

  .game-iframe {
    flex: 1;
    border: none;
    background: var(--darker);
  }

  /* Toast notifications */
  .toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    pointer-events: none;
  }

  .toast {
    background: var(--dark);
    border: 1px solid var(--card-border);
    border-radius: 8px;
    padding: 1rem 1.25rem;
    color: var(--light);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    max-width: 300px;
    animation: toastSlideIn 0.3s ease-out;
    pointer-events: auto;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .toast.success {
    border-left: 4px solid var(--success);
  }

  .toast.error {
    border-left: 4px solid var(--danger);
  }

  .toast.info {
    border-left: 4px solid var(--primary);
  }

  .toast-icon {
    font-size: 1.1rem;
    flex-shrink: 0;
  }

  .toast.success .toast-icon {
    color: var(--success);
  }

  .toast.error .toast-icon {
    color: var(--danger);
  }

  .toast.info .toast-icon {
    color: var(--primary);
  }

  .toast-content {
    flex: 1;
  }

  .toast-title {
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 0.25rem;
  }

  .toast-message {
    font-size: 0.8rem;
    color: var(--gray);
    line-height: 1.3;
  }

  .toast-close {
    background: none;
    border: none;
    color: var(--gray);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  .toast-close:hover {
    color: var(--light);
    background: rgba(148, 163, 184, 0.1);
  }

  @keyframes toastSlideIn {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes toastSlideOut {
    from {
      opacity: 1;
      transform: translateX(0);
    }
    to {
      opacity: 0;
      transform: translateX(100%);
    }
  }

  /* Confirmation dialog */
  .confirm-dialog {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: 10000;
    display: none;
    justify-content: center;
    align-items: center;
    padding: 1rem;
  }

  .confirm-content {
    background: var(--dark);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: 2rem;
    max-width: 400px;
    width: 100%;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  }

  .confirm-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--light);
    margin-bottom: 1rem;
  }

  .confirm-message {
    font-size: 0.9rem;
    color: var(--gray);
    margin-bottom: 2rem;
    line-height: 1.5;
  }

  .confirm-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
  }

  body.modal-open {
    overflow: hidden !important;
    touch-action: none;
  }

  @keyframes pulseFade {
    0%, 100% {
      opacity: 0.85;
      transform: scale(1);
    }
    50% {
      opacity: 0.5;
      transform: scale(1.05);
    }
  }

  /* Enhanced file item styling */
.file-info[data-clickable="true"] {
border-radius: 8px;
transition: all 0.2s ease;
position: relative;
padding: 0.2rem;
margin: -0.2rem;
}

.file-info[data-clickable="true"]:hover {
background: rgba(99, 102, 241, 0.1);
transform: translateX(2px);
}

.file-info[data-clickable="true"]::after {
content: '';
position: absolute;
left: -4px;
top: 50%;
transform: translateY(-50%);
width: 2px;
height: 0;
background: var(--primary);
transition: height 0.2s ease;
}

.file-info[data-clickable="true"]:hover::after {
height: 80%;
}
/* ===== FLOATING CHATBOT STYLES ===== */
.chatbot-float {
position: fixed;
bottom: 25px;
right: 25px;
z-index: 9999;
cursor: pointer;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
animation: chatbotPulse 2s infinite;
}

.chatbot-float:hover {
transform: scale(1.1);
animation: none;
}

.chatbot-icon {
width: 60px;
height: 60px;
background: linear-gradient(135deg, var(--primary), var(--secondary));
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
color: white;
font-size: 1.8rem;
box-shadow: 
  0 8px 25px rgba(99, 102, 241, 0.4),
  0 4px 12px rgba(0, 0, 0, 0.3);
transition: all 0.3s ease;
position: relative;
overflow: hidden;
}

.chatbot-icon::before {
content: '';
position: absolute;
top: -50%;
left: -50%;
width: 200%;
height: 200%;
background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
transform: rotate(45deg);
transition: transform 0.6s ease;
}

.chatbot-float:hover .chatbot-icon::before {
transform: rotate(45deg) translate(100%, 100%);
}

.chatbot-tooltip {
position: absolute;
bottom: 70px;
right: 0;
background: var(--dark);
color: var(--light);
padding: 0.5rem 0.75rem;
border-radius: 8px;
font-size: 0.875rem;
white-space: nowrap;
opacity: 0;
visibility: hidden;
transform: translateY(10px);
transition: all 0.3s ease;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
border: 1px solid var(--card-border);
}

.chatbot-tooltip::after {
content: '';
position: absolute;
top: 100%;
right: 20px;
width: 0;
height: 0;
border-left: 8px solid transparent;
border-right: 8px solid transparent;
border-top: 8px solid var(--dark);
}

.chatbot-float:hover .chatbot-tooltip {
opacity: 1;
visibility: visible;
transform: translateY(0);
}

/* Missing pulse animation */
@keyframes chatbotPulse {
0%, 100% { 
  transform: scale(1); 
}
50% { 
  transform: scale(1.05); 
}
}

/* ===== CHATBOT MODAL - FIXED VERSION ===== */
.chatbot-modal {
position: fixed;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
height: 100dvh; /* Dynamic viewport height for mobile */
background: rgba(0, 0, 0, 0.9);
backdrop-filter: blur(10px);
z-index: 10000;
display: none;
padding: 0;
margin: 0;
overflow: hidden;
}

.chatbot-modal.open {
display: block; /* Changed from flex to block */
}

.chatbot-modal-content {
width: 100vw;
height: 100vh;
height: 100dvh; /* Dynamic viewport height */
display: flex;
flex-direction: column;
overflow: hidden;
border: none;
border-radius: 0;
background: transparent;
position: relative;
margin: 0;
padding: 0;
}

/* Hide the modal header completely */
.chatbot-modal-header {
display: none !important;
height: 0 !important;
padding: 0 !important;
margin: 0 !important;
}

/* Floating close button - repositioned */
.chatbot-modal-close {
position: fixed; /* Changed from absolute to fixed */
top: 1rem;
right: 1rem;
background: rgba(0, 0, 0, 0.8);
border: none;
color: white;
width: 44px; /* Larger for mobile */
height: 44px;
border-radius: 50%;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.2rem;
transition: all 0.2s ease;
z-index: 10002; /* Higher than iframe */
backdrop-filter: blur(10px);
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
-webkit-tap-highlight-color: transparent;
}

.chatbot-modal-close:hover,
.chatbot-modal-close:active {
background: rgba(0, 0, 0, 0.95);
transform: scale(1.05);
box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5);
}

/* Iframe container - FIXED */
.chatbot-iframe-container {
position: absolute;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
height: 100dvh; /* Dynamic viewport height */
overflow: hidden;
background: white;
}

/* Iframe - FIXED */
.chatbot-iframe {
position: absolute;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
height: 100dvh; /* Dynamic viewport height */
border: none;
background: white;
display: block;
overflow: hidden;
}

/* ===== MOBILE SPECIFIC FIXES ===== */
@media (max-width: 768px) {
.chatbot-modal {
  height: 100vh;
  height: 100dvh; /* Use dynamic viewport height */
  height: calc(var(--vh, 1vh) * 100); /* Fallback */
}

.chatbot-modal-content {
  height: 100vh;
  height: 100dvh;
  height: calc(var(--vh, 1vh) * 100);
}

.chatbot-iframe-container {
  height: 100vh;
  height: 100dvh;
  height: calc(var(--vh, 1vh) * 100);
}

.chatbot-iframe {
  height: 100vh;
  height: 100dvh;
  height: calc(var(--vh, 1vh) * 100);
}

/* Ensure modal blocks body scroll */
body.chatbot-modal-open {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
  height: 100% !important;
  touch-action: none !important;
}
}

/* ===== ULTRA MOBILE (480px and below) ===== */
@media (max-width: 480px) {
.chatbot-modal-close {
  top: 0.75rem;
  right: 0.75rem;
  width: 42px;
  height: 42px;
  font-size: 1.1rem;
}

/* Force full screen */
.chatbot-modal,
.chatbot-modal-content,
.chatbot-iframe-container,
.chatbot-iframe {
  width: 100vw !important;
  height: 100vh !important;
  height: 100dvh !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
  max-height: 100dvh !important;
  min-height: 100vh !important;
  min-height: 100dvh !important;
}
}
body.chatbot-modal-open {
overflow: hidden !important;
touch-action: none;
}
